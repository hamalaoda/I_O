```c
#include <unistd.h> 
ssize_t write(int fd, const void *buf, size_t count); 
```

- 功能：从buf指针所指向缓冲区数据的count字节写入到文件描述符fd所引用的文件中；不会立即写入，而是写入内核缓冲区（内核态）；硬件真正写入通常由 **异步机制**（调度器、DMA、中断）完成。
- 参数：   

  -  参数1：fd表示所有写文件的文件描述；   
  -  参数2：buf所有写数据的缓冲区起始地址；    
  - 参数3：count所要写入数据的字节数(期望写入字节，实际写入字节数可能小于count)。
- 返回值：    成功返回实际写入文件的字节数，失败返回-1且修改errno的值。
- 注意：    如果count为0，实际不会写入数据，此时的返回值可能为0或者-1.
- 📤 . 返回用户态（返回值可能小于 count）

  写完内核缓冲后，内核返回 **实际写入字节数**。

  | 返回值    | 意义                       |
  | --------- | -------------------------- |
  | `= count` | 全部写入缓冲               |
  | `< count` | 写了部分（缓冲满、阻塞等） |
  | `-1`      | 失败（需检查 `errno`）     |

```perl
用户态 write()
   ↓
GLIBC 封装函数
   ↓ (syscall 指令)
系统调用入口（切换到内核态）
   ↓
查找 fd 对应文件对象
   ↓
调用底层文件类型的 write
   ↓
写入内核缓冲区
   ↓
返回写入字节数
   ↓
切回用户态
```

